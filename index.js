(()=>{"use strict";var e=document.querySelector(".popup_profile"),t=document.querySelector(".popup__form_profile"),n=e.querySelector(".popup__input_type_name"),r=e.querySelector(".popup__input_type_spec"),o=document.querySelector(".popup_new-card"),i=document.querySelector(".popup__form_new-card"),c=(o.querySelector(".popup__input_type_title"),o.querySelector(".popup__input_type_link"),document.querySelector(".profile__add-button")),u=document.querySelector(".profile__edit-button"),a=(document.querySelectorAll(".popup__button-close"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-submit",inactiveButtonClass:"popup__button-submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"appendItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}}])&&l(t.prototype,n),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t){var n,r,o=t.link,i=t.title,c=t.cardSelector,u=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){e.target.classList.toggle("element__heart_active")},(n="_revertHeart")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._cardSelector=c,this._image=o,this._title=i,this._cardTemplate=document.querySelector(this._cardSelector),this._handleCardClick=u}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return this._cardTemplate.content.cloneNode(!0)}},{key:"_deleteCard",value:function(e){e.target.closest(".element").remove()}},{key:"_setEventListeners",value:function(){this._element.querySelector(".element__heart").addEventListener("click",this._revertHeart),this._element.querySelector(".element__trash").addEventListener("click",this._deleteCard),this._imageElement.addEventListener("click",this._handleCardClick)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._imageElement=this._element.querySelector(".element__image"),this._imageElement.src=this._image,this._element.querySelector(".element__text").textContent=this._title,this._setEventListeners(),this._element}}])&&p(t.prototype,n),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),m(this,"_toggleButtonState",(function(e,t,n){r._hasInvalidInput(e)?(t.classList.add(n.inactiveButtonClass),t.disabled=!0):(t.classList.remove(n.inactiveButtonClass),t.disabled=!1)})),m(this,"_hideInputError",(function(e,t,n){var r=e.querySelector("#".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),r.classList.remove(n.errorClass),r.textContent=""})),m(this,"_showInputError",(function(e,t,n,r){var o=e.querySelector("#".concat(t.id,"-error"));t.classList.add(r.inputErrorClass),o.textContent=n,o.classList.add(r.errorClass)})),m(this,"_checkInputValidity",(function(e,t,n){t.validity.valid?r._hideInputError(e,t,n):r._showInputError(e,t,t.validationMessage,n)})),m(this,"_setEventListeners",(function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);r._toggleButtonState(n,o,t),n.forEach((function(i){i.addEventListener("input",(function(){r._checkInputValidity(e,i,t),r._toggleButtonState(n,o,t)}))}))})),m(this,"enableValidation",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r._newForm=e,r._newForm?r._checkValidation(r._checkingForm,r._settings,r._newForm):(r._checkingForm.addEventListener("submit",(function(e){e.preventDefault()})),r._setEventListeners(r._checkingForm,r._settings))})),this._settings=t,this._checkingForm=n}var t,n;return t=e,(n=[{key:"_checkValidation",value:function(e,t,n){var r=this,o=Array.from(e.querySelectorAll(t.inputSelector)),i=e.querySelector(t.submitButtonSelector);this._toggleButtonState(o,i,t),o.forEach((function(o){n?r._hideInputError(e,o,t):r._checkInputValidity(e,o,t)}))}}])&&_(t.prototype,n),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t,this._popupForm=document.querySelector(this._formSelector),this._closeButton=this._popupForm.querySelector(".popup__button-close"),this.setEventListeners(),this._handler=this._handleEscClose(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupForm.classList.add("popup_opened"),document.addEventListener("keydown",this._handler)}},{key:"close",value:function(){this._popupForm.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(t){e.close()})),this._popupForm.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}},{key:"_handleEscClose",value:function(e){return function(t){"Escape"===t.key&&(document.removeEventListener("keydown",e._handler),e.close())}}}])&&h(t.prototype,n),e}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function c(e,t){var n,r=e.item;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,t))._popupImagePhoto=n._popupForm.querySelector(".popup__image"),n._popupImageTitle=n._popupForm.querySelector(".popup__image-title"),n._src=r.src,n._title=r.textContent,n}return t=c,(n=[{key:"open",value:function(){this._popupImagePhoto.src=this._src,this._popupImageTitle.textContent=this._title,g(w(c.prototype),"open",this).call(this)}}])&&b(t.prototype,n),c}(y);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return(q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function c(e){var t,n=e.handleFormSubmit,r=e.formSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,r))._handleFormSubmit=n,t._element=t._popupForm.querySelector(".popup__form"),t._setEventListeners(),t}return t=c,(n=[{key:"close",value:function(){this._element.reset(),q(I(c.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._element.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"_setEventListeners",value:function(){var e=this;this._element.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}}])&&O(t.prototype,n),c}(y);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t){var n=t.nameSelector,r=t.specSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._specElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{profileName:this._nameElement.textContent,profileSpec:this._specElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.userName,n=e.userSpec;this._nameElement.textContent=t,this._specElement.textContent=n}}])&&P(t.prototype,n),e}(),R=new x({formSelector:".popup_profile",handleFormSubmit:function(e){T.setUserInfo({userName:e.name,userSpec:e.spec})}}),T=new F({nameSelector:".profile__name",specSelector:".profile__spec"}),V=new x({formSelector:".popup_new-card",handleFormSubmit:function(e){var t=new f({link:e.link,title:e.title,cardSelector:"#card",handleCardClick:function(e){var t={};t.src=e.target.src,t.textContent=e.target.closest(".element").querySelector(".element__text").textContent,new E({item:t},".popup_image").open()}}).generateCard();A.prependItem(t)}}),B=new d(a,t),D=new d(a,i),A=new s({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=new f({link:e.link,title:e.name,cardSelector:"#card",handleCardClick:function(e){var t={};t.src=e.target.src,t.textContent=e.target.closest(".element").querySelector(".element__text").textContent,new E({item:t},".popup_image").open()}}).generateCard();A.appendItem(t)}},".elements__list");A.renderItems(),u.addEventListener("click",(function(e){var t=T.getUserInfo();n.value=t.profileName,r.value=t.profileSpec,B.enableValidation(!0),R.open()})),c.addEventListener("click",(function(){i.reset(),D.enableValidation(!0),V.open()})),B.enableValidation(!1),D.enableValidation(!1)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbInBvcHVwUHJvZmlsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBvcHVwRm9ybVByb2ZpbGUiLCJpbnB1dE5hbWUiLCJpbnB1dFNwZWMiLCJwb3B1cE5ld0NhcmQiLCJwb3B1cEZvcm1OZXdDYXJkIiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVFZGl0QnV0dG9uIiwidmFsaWRhdGVTZXR0aW5ncyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJ0aGlzIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImZvckVhY2giLCJpdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJDYXJkIiwibGluayIsInRpdGxlIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRTZWxlY3RvciIsIl9pbWFnZSIsIl90aXRsZSIsIl9jYXJkVGVtcGxhdGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsImNsb3Nlc3QiLCJyZW1vdmUiLCJfZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfcmV2ZXJ0SGVhcnQiLCJfZGVsZXRlQ2FyZCIsIl9pbWFnZUVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJzcmMiLCJ0ZXh0Q29udGVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImNoZWNraW5nRm9ybSIsImlucHV0TGlzdCIsInNvbWUiLCJpbnB1dEZpZWxkIiwidmFsaWRpdHkiLCJ2YWxpZCIsImJ1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiYWRkIiwiZGlzYWJsZWQiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiZXJyb3JNZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJBcnJheSIsImZyb20iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwibmV3Rm9ybSIsIl9uZXdGb3JtIiwiX2NoZWNrVmFsaWRhdGlvbiIsIl9jaGVja2luZ0Zvcm0iLCJfc2V0dGluZ3MiLCJwcmV2ZW50RGVmYXVsdCIsInRoaXNGb3JtIiwiUG9wdXAiLCJfZm9ybVNlbGVjdG9yIiwiX3BvcHVwRm9ybSIsIl9jbG9zZUJ1dHRvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsImNvbnRhaW5zIiwiY29udGV4dCIsImtleSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlUGhvdG8iLCJfcG9wdXBJbWFnZVRpdGxlIiwiX3NyYyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJyZXNldCIsIl9pbnB1dExpc3QiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwibmFtZSIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJzcGVjU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfc3BlY0VsZW1lbnQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVTcGVjIiwidXNlck5hbWUiLCJ1c2VyU3BlYyIsIm5ld1BvcHVwUHJvZmlsZSIsInVzZXJPYmplY3QiLCJzZXRVc2VySW5mbyIsInNwZWMiLCJuZXdQb3B1cE5ld0NhcmQiLCJjYXJkRWxlbWVudCIsImltYWdlSW5mIiwib3BlbiIsImdlbmVyYXRlQ2FyZCIsImNhcmRBcnJheSIsInByZXBlbmRJdGVtIiwicHJvZmlsZVZhbGlkYXRvciIsIm5ld0NhcmRWYWxpZGF0b3IiLCJhcHBlbmRJdGVtIiwicmVuZGVySXRlbXMiLCJteVVzZXIiLCJnZXRVc2VySW5mbyIsImVuYWJsZVZhbGlkYXRpb24iXSwibWFwcGluZ3MiOiJtQkFBTyxJQUFNQSxFQUFlQyxTQUFTQyxjQUFjLGtCQUN0Q0MsRUFBbUJGLFNBQVNDLGNBQWMsd0JBQzFDRSxFQUFZSixFQUFhRSxjQUFjLDJCQUN2Q0csRUFBWUwsRUFBYUUsY0FBYywyQkFFdkNJLEVBQWVMLFNBQVNDLGNBQWMsbUJBQ3RDSyxFQUFtQk4sU0FBU0MsY0FBYyx5QkFJMUNNLEdBSGFGLEVBQWFKLGNBQWMsNEJBQzVCSSxFQUFhSixjQUFjLDJCQUVwQkQsU0FBU0MsY0FBYyx5QkFDMUNPLEVBQW9CUixTQUFTQyxjQUFjLHlCQXFDM0NRLEdBbkNtQlQsU0FBU1UsaUJBQWlCLHdCQW1DMUIsQ0FDOUJDLGFBQWMsZUFDZEMsY0FBZSxnQkFDZkMscUJBQXNCLHdC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Q3pCbkgsUUFBa0JzSSxFQUFPbEIsWUFDekJjLEVBQWlCTSxrQkFBaUIsR0FDbENqQixFQUFnQk8sVUF3RGxCM0gsRUFBaUIwQyxpQkFBaUIsU0F0Q2xDLFdBQ0UzQyxVQUNBaUksRUFBaUJLLGtCQUFpQixHQUNsQ2IsRUFBZ0JHLFVBcUNsQkksRUFBaUJNLGtCQUFpQixHQUNsQ0wsRUFBaUJLLGtCQUFpQixJIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfcHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV9wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIik7XG5leHBvcnQgY29uc3QgaW5wdXRTcGVjID0gcG9wdXBQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfc3BlY1wiKTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwTmV3Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfbmV3LWNhcmRcIik7XG5leHBvcnQgY29uc3QgcG9wdXBGb3JtTmV3Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fbmV3LWNhcmRcIik7XG5leHBvcnQgY29uc3QgaW5wdXRUaXRsZSA9IHBvcHVwTmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0TGluayA9IHBvcHVwTmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX2xpbmtcIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19idXR0b24tY2xvc2VcIik7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcItCQ0YDRhdGL0LdcIixcbiAgICBsaW5rOlxuICAgICAgXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCLQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMXCIsXG4gICAgbGluazpcbiAgICAgIFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0JjQstCw0L3QvtCy0L5cIixcbiAgICBsaW5rOlxuICAgICAgXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0JrQsNC80YfQsNGC0LrQsFwiLFxuICAgIGxpbms6XG4gICAgICBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcItCl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9XCIsXG4gICAgbGluazpcbiAgICAgIFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwi0JHQsNC50LrQsNC7XCIsXG4gICAgbGluazpcbiAgICAgIFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvbi1zdWJtaXRcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uLXN1Ym1pdF9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuL0NhcmQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXBwZW5kSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHByZXBlbmRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHtsaW5rLCB0aXRsZSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2t9KSB7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2ltYWdlID0gbGluaztcbiAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0aGlzLl9jYXJkVGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG4gIF9yZXZlcnRIZWFydCA9IChldnQpID0+IHtcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19oZWFydF9hY3RpdmVcIik7XG4gIH07XG5cbiAgX2RlbGV0ZUNhcmQoZXZ0KSB7XG4gICAgZXZ0LnRhcmdldC5jbG9zZXN0KFwiLmVsZW1lbnRcIikucmVtb3ZlKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faGVhcnRcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fcmV2ZXJ0SGVhcnQpO1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RyYXNoXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2RlbGV0ZUNhcmQpO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2ltYWdlO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBjaGVja2luZ0Zvcm0pIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2NoZWNraW5nRm9ybSA9IGNoZWNraW5nRm9ybTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEZpZWxkKSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RmllbGQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpID0+IHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncykgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHNldHRpbmdzLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgc2V0dGluZ3MpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncykgPT4ge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihcbiAgICAgICAgZm9ybUVsZW1lbnQsXG4gICAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgICBzZXR0aW5nc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpO1xuICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpO1xuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIF9jaGVja1ZhbGlkYXRpb24odGhpc0Zvcm0sIHNldHRpbmdzLCBuZXdGb3JtKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXNGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSB0aGlzRm9ybS5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpZiAobmV3Rm9ybSkge1xuICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcih0aGlzRm9ybSwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkodGhpc0Zvcm0sIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9IChuZXdGb3JtID0gZmFsc2UpID0+IHtcbiAgICB0aGlzLl9uZXdGb3JtID0gbmV3Rm9ybTtcbiAgICBpZiAodGhpcy5fbmV3Rm9ybSkge1xuICAgICAgdGhpcy5fY2hlY2tWYWxpZGF0aW9uKHRoaXMuX2NoZWNraW5nRm9ybSwgdGhpcy5fc2V0dGluZ3MsIHRoaXMuX25ld0Zvcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jaGVja2luZ0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9jaGVja2luZ0Zvcm0sIHRoaXMuX3NldHRpbmdzKTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBwb3B1cENsb3NlQnV0dG9uIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cHtcbiAgICBjb25zdHJ1Y3Rvcihmb3JtU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gZm9ybVNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvbi1jbG9zZVwiKTtcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9oYW5kbGVyID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UodGhpcyk7XG4gICAgfVxuXG4gICAgb3Blbigpe1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0uY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlcik7XG4gICAgfVxuXG4gICAgY2xvc2UoKXtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+e1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9ICAgICAgXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZShjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihldnQpe1xuICAgICAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjb250ZXh0Ll9oYW5kbGVyKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcih7aXRlbX0sIGZvcm1TZWxlY3Rvcil7XG4gICAgICAgIHN1cGVyKGZvcm1TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2VQaG90byA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZVRpdGxlID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXRpdGxlXCIpO1xuICAgICAgICB0aGlzLl9zcmMgPSBpdGVtLnNyYztcbiAgICAgICAgdGhpcy5fdGl0bGUgPSBpdGVtLnRleHRDb250ZW50O1xuXG4gICAgfVxuICAgIG9wZW4oKXtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZVBob3RvLnNyYyA9IHRoaXMuX3NyYztcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3Ioe2hhbmRsZUZvcm1TdWJtaXQsIGZvcm1TZWxlY3Rvcn0pe1xuICAgICAgICBzdXBlcihmb3JtU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgIGNsb3NlKCl7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVzZXQoKTtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTsgICAgICBcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgICB9IFxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfSBcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mb3tcbiAgICBjb25zdHJ1Y3Rvcih7bmFtZVNlbGVjdG9yLCBzcGVjU2VsZWN0b3J9KXtcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3NwZWNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzcGVjU2VsZWN0b3IpO1xuICAgIH1cbiAgICBnZXRVc2VySW5mbygpe1xuICAgICAgICBjb25zdCB1c2VyTmFtZSA9IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICBjb25zdCB1c2VyU3BlYyA9IHRoaXMuX3NwZWNFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvZmlsZU5hbWU6IHVzZXJOYW1lLFxuICAgICAgICAgICAgcHJvZmlsZVNwZWM6IHVzZXJTcGVjXG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0VXNlckluZm8oe3VzZXJOYW1lLCB1c2VyU3BlY30pe1xuICAgICAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJOYW1lO1xuICAgICAgICB0aGlzLl9zcGVjRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJTcGVjO1xuICAgIH1cbn1cblxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIHZhbGlkYXRlU2V0dGluZ3MsXG4gIGluaXRpYWxDYXJkcyxcbiAgcG9wdXBGb3JtUHJvZmlsZSxcbiAgaW5wdXROYW1lLFxuICBpbnB1dFNwZWMsXG4gIHBvcHVwRm9ybU5ld0NhcmQsXG4gIHByb2ZpbGVBZGRCdXR0b24sXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbmNvbnN0IG5ld1BvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9wcm9maWxlXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XG4gICAgdXNlck9iamVjdC5zZXRVc2VySW5mbyh7XG4gICAgICB1c2VyTmFtZTogaXRlbS5uYW1lLFxuICAgICAgdXNlclNwZWM6IGl0ZW0uc3BlYyxcbiAgICB9KTtcbiAgfSxcbn0pO1xuXG5jb25zdCB1c2VyT2JqZWN0ID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIHNwZWNTZWxlY3RvcjogXCIucHJvZmlsZV9fc3BlY1wiLFxufSk7XG5cbmNvbnN0IG5ld1BvcHVwTmV3Q2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9uZXctY2FyZFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoaXRlbSkgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgICBsaW5rOiBpdGVtLmxpbmssXG4gICAgICB0aXRsZTogaXRlbS50aXRsZSxcbiAgICAgIGNhcmRTZWxlY3RvcjogXCIjY2FyZFwiLFxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoZXZ0KSA9PiB7XG4gICAgICAgIGNvbnN0IGltYWdlSW5mID0ge307XG4gICAgICAgIGltYWdlSW5mLnNyYyA9IGV2dC50YXJnZXQuc3JjO1xuICAgICAgICBpbWFnZUluZi50ZXh0Q29udGVudCA9IGV2dC50YXJnZXRcbiAgICAgICAgICAuY2xvc2VzdChcIi5lbGVtZW50XCIpXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGV4dFwiKS50ZXh0Q29udGVudDtcbiAgICAgICAgY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpdGVtOiBpbWFnZUluZixcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiLnBvcHVwX2ltYWdlXCJcbiAgICAgICAgKTtcbiAgICAgICAgaW1hZ2VQb3B1cC5vcGVuKCk7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICBjYXJkQXJyYXkucHJlcGVuZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICB9LFxufSk7XG5cbmNvbnN0IHByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0ZVNldHRpbmdzLCBwb3B1cEZvcm1Qcm9maWxlKTtcblxuY29uc3QgbmV3Q2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRlU2V0dGluZ3MsIHBvcHVwRm9ybU5ld0NhcmQpO1xuXG5mdW5jdGlvbiBzaG93UG9wdXBQcm9maWxlKGV2dCkge1xuICBjb25zdCBteVVzZXIgPSB1c2VyT2JqZWN0LmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZS52YWx1ZSA9IG15VXNlci5wcm9maWxlTmFtZTtcbiAgaW5wdXRTcGVjLnZhbHVlID0gbXlVc2VyLnByb2ZpbGVTcGVjO1xuICBwcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24odHJ1ZSk7XG4gIG5ld1BvcHVwUHJvZmlsZS5vcGVuKCk7XG59XG5cbmZ1bmN0aW9uIHNob3dQb3B1cEltYWdlKGV2dCkge1xuICBjb25zdCBpbWFnZUluZiA9IHt9O1xuICBpbWFnZUluZi5zcmMgPSBldnQudGFyZ2V0LnNyYztcbiAgaW1hZ2VJbmYudGV4dENvbnRlbnQgPSBldnQudGFyZ2V0XG4gICAgLmNsb3Nlc3QoXCIuZWxlbWVudFwiKVxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RleHRcIikudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXG4gICAge1xuICAgICAgaXRlbTogaW1hZ2VJbmYsXG4gICAgfSxcbiAgICBcIi5wb3B1cF9pbWFnZVwiXG4gICk7XG4gIGltYWdlUG9wdXAub3BlbigpO1xufVxuXG5mdW5jdGlvbiBzaG93UG9wdXBOZXdDYXJkKCkge1xuICBwb3B1cEZvcm1OZXdDYXJkLnJlc2V0KCk7XG4gIG5ld0NhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbih0cnVlKTtcbiAgbmV3UG9wdXBOZXdDYXJkLm9wZW4oKTtcbn1cblxuY29uc3QgY2FyZEFycmF5ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZCh7XG4gICAgICAgIGxpbms6IGl0ZW0ubGluayxcbiAgICAgICAgdGl0bGU6IGl0ZW0ubmFtZSxcbiAgICAgICAgY2FyZFNlbGVjdG9yOiBcIiNjYXJkXCIsXG4gICAgICAgIGhhbmRsZUNhcmRDbGljazogKGV2dCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGltYWdlSW5mID0ge307XG4gICAgICAgICAgaW1hZ2VJbmYuc3JjID0gZXZ0LnRhcmdldC5zcmM7XG4gICAgICAgICAgaW1hZ2VJbmYudGV4dENvbnRlbnQgPSBldnQudGFyZ2V0XG4gICAgICAgICAgICAuY2xvc2VzdChcIi5lbGVtZW50XCIpXG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190ZXh0XCIpLnRleHRDb250ZW50O1xuICAgICAgICAgIGNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGl0ZW06IGltYWdlSW5mLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLnBvcHVwX2ltYWdlXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIGltYWdlUG9wdXAub3BlbigpO1xuICAgICAgICB9LFxuICAgICAgfSkuZ2VuZXJhdGVDYXJkKCk7XG4gICAgICBjYXJkQXJyYXkuYXBwZW5kSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgXCIuZWxlbWVudHNfX2xpc3RcIlxuKTtcblxuY2FyZEFycmF5LnJlbmRlckl0ZW1zKCk7XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93UG9wdXBQcm9maWxlKTtcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dQb3B1cE5ld0NhcmQpO1xuXG5wcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oZmFsc2UpO1xubmV3Q2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKGZhbHNlKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=